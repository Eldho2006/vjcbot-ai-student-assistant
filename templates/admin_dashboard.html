{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card shadow h-100">
            <div class="card-header bg-success text-white">
                Manage Documents (Knowledge Base)
            </div>
            <div class="card-body">
                <form action="{{ url_for('main.upload_file') }}" method="POST" enctype="multipart/form-data">
                    <div class="input-group mb-3">
                        <input type="file" class="form-control" name="file" accept=".pdf,.png,.jpg,.jpeg">
                        <button class="btn btn-primary" type="submit">Upload</button>
                    </div>
                </form>
                <hr>
                <h6>Uploaded Documents</h6>
                <ul class="list-group list-group-flush" style="max-height: 200px; overflow-y: auto;">
                    {% for doc in documents %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ doc.filename }}
                        <div>
                            <span class="badge bg-secondary me-2">{{ doc.doc_type }}</span>
                            <form action="{{ url_for('main.delete_file', file_id=doc.id) }}" method="POST"
                                style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-danger"
                                    onclick="return confirm('Are you sure you want to delete this file?')">Delete</button>
                            </form>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card shadow h-100">
            <div class="card-header bg-info text-dark">
                Manage Users
            </div>
            <div class="card-body">
                <form action="{{ url_for('main.add_user') }}" method="POST">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" name="username" placeholder="New Username" required>
                        <input type="password" class="form-control" name="password" placeholder="Password" required>
                        <button class="btn btn-secondary" type="submit">Add Student</button>
                    </div>
                </form>
                <hr>
                <h6>Existing Students</h6>
                <ul class="list-group list-group-flush" style="max-height: 200px; overflow-y: auto;">
                    {% for user in users %}
                    <li class="list-group-item">{{ user.username }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}